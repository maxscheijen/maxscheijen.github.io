<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <title>Managing tmux sessions with fzf - Max Scheijen</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../theme/css/main.css" type="text/css" />
  <link rel="stylesheet" href="../../theme/css/syntax.css" type="text/css" />
  <link rel="icon" type="image/png" sizes="16x16" href="../../theme/images/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../theme/images/favicon-32x32.png">
  
  <link href="../../feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Max Scheijen - Flux ATOM" />
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DC0740CRYY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', "G-DC0740CRYY");
  </script>
</head>
<body>
  <main>
        
  <h1>Managing tmux sessions with fzf</h1>
  <a href="/" class="by">Dec 25, 2024 - By Max Scheijen</a>
  <div class="meta">
    <!-- <p>Dec 25, 2024</p> -->
    <!-- <p></p> -->
  </div>
  <article>
  <p>Terminal multiplexers like <code>tmux</code> are essential tools for developers, allowing us to manage multiple terminal sessions efficiently. While <code>tmux</code> itself is powerful, we can enhance its functionality by combining it with <code>fzf</code>, the fuzzy finder, to create a more intuitive session management workflow.</p>
<h2>The Basic Approach</h2>
<p>The foundation of this solution lies in combining <code>tmux</code>'s session listing capability with <code>fzf</code>'s search interface. Here's how we can list all sessions using <code>fzf</code>:</p>
<div class="highlight"><pre><span></span><code>tmux<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span>-F:<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>fzf
</code></pre></div>

<p>This command breaks down into three parts:</p>
<ul>
<li><code>tmux ls</code> lists all active sessions</li>
<li><code>awk -F:</code> splits the output at the colon and extracts session names</li>
<li><code>fzf</code> provides an interactive search interface</li>
</ul>
<h2>Creating a Session Switcher</h2>
<p>To make this truly useful, we can create a script that not only lists sessions but also switches to the selected one. Here's the basic implementation:</p>
<div class="highlight"><pre><span></span><code><span class="nv">session</span><span class="o">=</span><span class="k">$(</span>mux<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span>-F:<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>fzf<span class="k">)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$session</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>tmux<span class="w"> </span>switch-client<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$session</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No session selected.&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<h2>Enhanced Version with Visual Indicators</h2>
<p>To make the interface more informative, we can add a colored indicator for the currently active session. Here's the improved version:</p>
<div class="highlight"><pre><span></span><code><span class="nv">session</span><span class="o">=</span><span class="k">$(</span>tmux<span class="w"> </span>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span>-F:<span class="w"> </span><span class="s1">&#39;</span>
<span class="s1">    /attached/ {print $1 &quot;\033[32m *\033[0m&quot;}</span>
<span class="s1">    !/attached/ {print $1} </span>
<span class="s1">&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>fzf<span class="w"> </span>--ansi<span class="k">)</span>
<span class="nv">session</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$session</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/ (attached)$//&#39;</span><span class="k">)</span>
<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$session</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>tmux<span class="w"> </span>switch-client<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$session</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No session selected.&quot;</span>
<span class="k">fi</span>
</code></pre></div>

<p>This enhanced version uses green asterisks to highlight attached sessions, making it immediately clear which session is currently active.</p>
<h2>Integration with <code>tmux</code></h2>
<p>To make this functionality easily accessible, add this line to your <code>.tmux.conf</code>:</p>
<div class="highlight"><pre><span></span><code>bind-key<span class="w"> </span>t<span class="w"> </span>run-shell<span class="w"> </span><span class="s2">&quot;tmux neww </span><span class="nv">$HOME</span><span class="s2">/path/to/script&quot;</span>
</code></pre></div>

<p>Now you can trigger the session switcher using the <code>prefix + t</code> key combination.</p>
<p>Remember to make your script executable with <code>chmod +x path/to/script</code> before using it.</p>
<p>This simple yet powerful integration demonstrates how combining familiar tools in thoughtful ways can significantly improve our development workflow. By leveraging <code>fzf</code>'s search capabilities with <code>tmux</code>'s session management, we've created a more intuitive way to handle multiple terminal sessions.</p>
  </article>
  </main>
</body>
</html>